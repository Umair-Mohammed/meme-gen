{"version":3,"sources":["Gallery.js","Image.js","utils/getOrCreateAuthToken.js","Image2.js","utils/utils.js","utils/api.js","TempGen.js","App.js","serviceWorker.js","index.js"],"names":["logo","Image","props","setSpans","height","imageRef","current","clientHeight","spans","Math","ceil","setState","state","React","createRef","this","addEventListener","style","gridRowEnd","ref","src","image","url","alt","name","id","onClick","e","handleclick","Component","then","module","default","cachedToken","Gallery","className","position","top","right","width","handleRandom","images","map","key","image_source","uuid","v1","namespace","data","window","localStorage","setItem","JSON","stringify","store","getItem","parse","fetch","require","ENDPOINT","process","getOrCreateAuthToken","a","method","headers","body","username","password","response","json","Error","getMemes","sessionId","REACT_APP_ASTRA_DB_KEYSPACE","TABLE_NAME","authToken","getMemesSaved","query","saveMemes","meme","utils","columns","Object","keys","value","initialState","toptext","bottomtext","isTopDragging","isBottomDragging","topX","topY","bottomX","bottomY","saved_images","TempGen","getStateObj","type","rect","getBoundingClientRect","xOffset","clientX","left","yOffset","clientY","stateObj","changeText","event","currentTarget","resizeText","handleMouseDown","document","handleMouseMove","handleMouseUp","removeEventListener","saveMeme","getElementById","length","svg","getSessionId","resetBoxes","fontSize","currentWidth","textLength","baseVal","imageWidth","params","URLSearchParams","location","search","get","sid","imageId","rows","newHeight","textStyle","fontFamily","textTransform","fill","stroke","userSelect","toggleSelected","el","svgRef","xlinkHref","zIndex","x","y","dominantBaseline","textAnchor","onMouseDown","onMouseUp","placeholder","onChange","App","memes","selected","selectedImg","handleImgClick","find","i","target","chooseRandom","floor","random","toggleComponent","filter","box_count","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.08818220.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport Image from \"./Image\";\nimport \"./ImageList.css\"\n\n  let logo;\n    import(`./images/${process.env.REACT_APP_LOGO}`).then((module) => {\n      logo = module.default;\n  });\n\nexport default class Gallery extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"h1\">\n          MEME GENERATOR \n           </div>\n           <img className=\"icon\" src={logo} alt=\"Logo\" style={{position: 'absolute', top: 10, right: 15, width: '7%', height: 100}}/>\n\n       \n\n        <div>\n          <button className=\"btn-gallery\" onClick={() => this.props.handleRandom()}>Gimme a Random Meme</button>\n          \n        \n        </div>\n\n        <div className=\"image-list\">\n          {this.props.images.map((image) => {\n            return (\n              <Image\n                key={image.id}\n                image={image}\n                handleclick={this.props.handleclick}\n              />\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nexport default class Image extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spans: 0,\n    }\n    this.imageRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.imageRef.current.addEventListener('load', this.setSpans)\n  }\n\n  setSpans = () => {\n    const height = this.imageRef.current.clientHeight;\n    const spans = Math.ceil(height / 10 + 2)\n    this.setState({ spans })\n  }\n\n  render() {\n    return (\n      <div style={{ gridRowEnd: `span ${this.state.spans}` }}>\n        <img\n          ref={this.imageRef}\n          src={this.props.image.url}\n          alt={this.props.image.name}\n          id={this.props.image.id}\n          onClick={(e) => this.props.handleclick(e)}\n        />\n      </div>\n    );\n  }\n}\n","const fetch = require('cross-fetch')\nconst ENDPOINT = `https://${process.env.REACT_APP_ASTRA_DB_ID}-${process.env.REACT_APP_ASTRA_DB_REGION}.apps.astra.datastax.com/api/rest/v1`;\nconst REACT_APP_ASTRA_DB_USERNAME = process.env.REACT_APP_ASTRA_DB_USERNAME;\nconst REACT_APP_ASTRA_DB_PASSWORD = process.env.REACT_APP_ASTRA_DB_PASSWORD;\n\n/*\n * This global variable will persist across requests throughout the life of the lambda.\n * We only need to fetch a token for the first request\n * Lambda creates new containers when the original one expires or if there is high concurrency\n * in which case the new containers will have to fetch their own tokens.\n */\nlet cachedToken;\n\nexport default async function getOrCreateAuthToken() {\n  if (cachedToken) {\n    return cachedToken;\n  }\n  try {\n    //console.log(ENDPOINT)\n    const response = await fetch(`${ENDPOINT}/auth`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        username: REACT_APP_ASTRA_DB_USERNAME,\n        password: REACT_APP_ASTRA_DB_PASSWORD,\n      }),\n    });\n    cachedToken = await response.json();\n    return cachedToken;\n  } catch (e) {\n    throw new Error('Could not authenticate with the Astra API');\n  }\n}","import React from \"react\";\nexport default class Image extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spans: 0,\n    }\n    this.imageRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.imageRef.current.addEventListener('load', this.setSpans)\n  }\n\n  setSpans = () => {\n    const height = this.imageRef.current.clientHeight;\n    const spans = Math.ceil(height / 10 + 2)\n    this.setState({ spans })\n  }\n\n  render() {\n    return (\n      <div style={{ gridRowEnd: `span ${this.state.spans}` }}>\n        <img\n          ref={this.imageRef}\n          src={this.props.image.image_source}\n          alt={this.props.image.name}\n          id={this.props.image.id}\n          //onClick={(e) => this.props.handleclick(e)}\n        />\n      </div>\n    );\n  }\n}\n","/* global localStorage */\n\nimport uuid from 'node-uuid'\n\nexport default {\n  uuid() {\n    return uuid.v1()\n  },\n  pluralize(count, word) {\n    return count === 1 ? word : `${word}s`;\n  },\n  store(namespace, data) {\n    if (typeof window !== 'undefined') {\n      if (data) {\n        return localStorage.setItem(namespace, JSON.stringify(data));\n      }\n      const store = localStorage.getItem(namespace);\n      return (store && JSON.parse(store)) || null;\n    }\n    return null;\n  },\n};\n","import utils from './utils';\nimport getOrCreateAuthToken from './getOrCreateAuthToken';\n\nexport const getMemes = async (sessionId) => {\n\n  const fetch = require('cross-fetch');\n  const ENDPOINT = `https://${process.env.REACT_APP_ASTRA_DB_ID}-${process.env.REACT_APP_ASTRA_DB_REGION}.apps.astra.datastax.com/api/rest/v1`;\n  const REACT_APP_ASTRA_DB_KEYSPACE = process.env.REACT_APP_ASTRA_DB_KEYSPACE;\n  const TABLE_NAME = 'memegen';\n  const {authToken} = await getOrCreateAuthToken();\n\n  try {\n    const response = await fetch(`${ENDPOINT}/keyspaces/${REACT_APP_ASTRA_DB_KEYSPACE}/tables/${TABLE_NAME}/rows`, {\n      headers: {\n        'x-cassandra-token': authToken\n      }\n    });\n    return response.json();\n  } catch (e) {\n    return JSON.stringify(e);\n  }\n};\n\nexport const getMemesSaved = async (query) => {\n  const fetch = require('cross-fetch');\n  const ENDPOINT = `https://${process.env.REACT_APP_ASTRA_DB_ID}-${process.env.REACT_APP_ASTRA_DB_REGION}.apps.astra.datastax.com/api/rest/v1`;\n  const REACT_APP_ASTRA_DB_KEYSPACE = process.env.REACT_APP_ASTRA_DB_KEYSPACE;\n  const TABLE_NAME = 'memes_saved';\n  const {authToken} = await getOrCreateAuthToken();\n\n  try {\n    const response = await fetch(`${ENDPOINT}/keyspaces/${REACT_APP_ASTRA_DB_KEYSPACE}/tables/${TABLE_NAME}/rows/query`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-cassandra-token': authToken\n      },\n      body: query\n    });\n    return response.json();\n  } catch (e) {\n    return JSON.stringify(e);\n  }\n};\n\nexport const deleteMemes = async (sessionId) => {\n  // stub for code in /functions\n  //return response.json();\n};\n\nexport const saveMemes = async (meme, sessionId) => {\n  //if (!meme.uuid) {\n  //  meme.uuid = utils.uuid();\n  //}\n  meme.uuid = utils.uuid();\n  meme['sessionid'] = sessionId;\n\n  const columns = {\n    columns: Object.keys(meme).map(key => {\n      return {\n        name: key,\n        value: meme[key]\n      };\n    })\n  };\n\n  const fetch = require('cross-fetch');\n  const ENDPOINT = `https://${process.env.REACT_APP_ASTRA_DB_ID}-${process.env.REACT_APP_ASTRA_DB_REGION}.apps.astra.datastax.com/api/rest/v1`;\n  const REACT_APP_ASTRA_DB_KEYSPACE = process.env.REACT_APP_ASTRA_DB_KEYSPACE;\n  const TABLE_NAME = 'memes_saved';\n  const {authToken} = await getOrCreateAuthToken();\n\n  try {\n    const response = await fetch(`${ENDPOINT}/keyspaces/${REACT_APP_ASTRA_DB_KEYSPACE}/tables/${TABLE_NAME}/rows`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-cassandra-token': authToken,\n      },\n      body: JSON.stringify(columns)\n    });\n    return JSON.stringify(await response.json());\n  } catch (e) {\n    return JSON.stringify(e);\n  }\n\n};","import React, { Component } from \"react\";\nimport \"./Generator.css\";\nimport Image from \"./Image2\";\nimport \"./ImageList.css\"\nimport * as svg from \"save-svg-as-png\";\nimport utils from './utils/utils';\nimport {saveMemes} from './utils/api';\nimport {getMemesSaved} from './utils/api';\n\nconst initialState = {\n    toptext: \"\",\n    bottomtext: \"\",\n    isTopDragging: false,\n    isBottomDragging: false,\n    topX: \"50%\",\n    topY: \"10%\",\n    bottomX: \"50%\",\n    bottomY: \"90%\",\n    saved_images: []\n};\n\nclass TempGen extends Component {\n    constructor() {\n        super();\n        this.state = {\n            ...initialState\n        };\n    }\n\n    getSessionId() {\n        // Check if a session id query parameter exists\n        const params = new URLSearchParams(window.location.search);\n        if (params.get('session-id')) {\n          return params.get('session-id');\n        }\n\n        // Check if a session id is stored to local storage\n        if (utils.store('session-id')) {\n          return utils.store('session-id');\n        }\n\n        // Otherwise, generate a new session id\n        const sid = utils.uuid();\n        utils.store('session-id', sid);\n        return sid;\n    };\n\n    getStateObj = (e, type) => {\n        let rect = this.imageRef.getBoundingClientRect();\n        const xOffset = e.clientX - rect.left;\n        const yOffset = e.clientY - rect.top;\n        let stateObj = {};\n        if (type === \"bottom\") {\n            stateObj = {\n                isBottomDragging: true,\n                isTopDragging: false,\n                bottomX: `${xOffset}px`,\n                bottomY: `${yOffset}px`,\n            };\n        } else if (type === \"top\") {\n            stateObj = {\n                isTopDragging: true,\n                isBottomDragging: false,\n                topX: `${xOffset}px`,\n                topY: `${yOffset}px`,\n            };\n        }\n        return stateObj;\n    };\n\n    changeText = (event) => {\n        this.setState({\n            [event.currentTarget.id]: event.currentTarget.value,\n        });\n        let type = event.currentTarget.name\n        this.resizeText(type)\n    };\n\n    handleMouseDown = (e, type) => {\n        const stateObj = this.getStateObj(e, type);\n        document.addEventListener(\"mousemove\", (event) =>\n            this.handleMouseMove(event, type)\n        );\n        this.setState({\n            ...stateObj,\n        });\n    };\n\n    handleMouseMove = (e, type) => {\n        if (this.state.isTopDragging || this.state.isBottomDragging) {\n            let stateObj = {};\n            if (type === \"bottom\" && this.state.isBottomDragging) {\n                stateObj = this.getStateObj(e, type);\n            } else if (type === \"top\" && this.state.isTopDragging) {\n                stateObj = this.getStateObj(e, type);\n            }\n            this.setState({\n                ...stateObj,\n            });\n        }\n    };\n\n    handleMouseUp = (event) => {\n        document.removeEventListener(\"mousemove\", this.handleMouseMove);\n        this.setState({\n            isTopDragging: false,\n            isBottomDragging: false,\n        });\n    };\n\n    saveMeme = () => {\n\n        let name = document.getElementById(\"memename\").value\n        name.length > 0 ?\n            svg.saveSvgAsPng(document.getElementById(\"svg_ref\"), `${name}.png`) :\n            svg.saveSvgAsPng(document.getElementById(\"svg_ref\"), \"meme.png\")\n        \n        svg.svgAsPngUri(document.getElementById(\"svg_ref\")).then(image_source => {\n            //console.log(image_source);\n            const sessionId = this.getSessionId();\n            const meme = this.props.meme;\n            meme['sessionid'] = sessionId;\n            meme['memename'] = document.getElementById(\"memename\").value;\n            meme['toptext'] = document.getElementById(\"toptext\").value;\n            meme['bottomtext'] = document.getElementById(\"bottomtext\").value;\n            meme['image_source'] = image_source;\n\n            saveMemes(meme,sessionId)\n              .then(data => {\n                    //console.log(data);\n                });\n\n        });\n        \n    };\n\n    resetBoxes = () => {\n        this.setState({\n            toptext: \"\",\n            bottomtext: \"\",\n            topX: \"50%\",\n            topY: \"10%\",\n            bottomX: \"50%\",\n            bottomY: \"90%\"\n        });\n        document.getElementById(\"toptext\").value = \"\";\n        document.getElementById(\"bottomtext\").value = \"\";\n        document.getElementById(\"memename\").value = \"\";\n        document.getElementById(\"tiptoptext\").style.fontSize = \"50px\"\n        document.getElementById(\"bittybottomtext\").style.fontSize = \"50px\"\n    }\n\n    resizeText = (type) => {\n        let currentWidth = document.getElementById(type).textLength.baseVal.value\n        let imageWidth = this.props.meme.width\n        if (currentWidth > imageWidth) {\n            document.getElementById(type).style.fontSize = `${(imageWidth / currentWidth) * 40}px`;\n        }\n    }\n\n    componentDidMount() {\n        const imageId = this.props.meme.id;\n        //console.log(imageId);\n        //const query = [];\n        //    query['columnNames'] = [\"image_source\"];\n        //    query['filters'] = [{\"value\":[\"161865971\"],\"columnName\":\"image_source\",\"operator\":\"eq\"}];\n        // i had some issues building the object so I just ended up using the original test string\n        const query = '{ \"columnNames\": [\"uuid\",\"id\",\"name\",\"image_source\"], \"filters\": [{\"value\": [\"' + imageId + '\"],\"columnName\": \"id\",\"operator\": \"eq\"}]}';\n        getMemesSaved(query)\n          .then(data => {\n                this.setState({ saved_images: data.rows });\n            });\n    }\n\n    render() {\n        const image = this.props.meme;\n        \n        var wrh = image.width / image.height;\n        var newWidth = 500;\n        var newHeight = newWidth / wrh;\n\n        const textStyle = {\n            fontFamily: \"Impact\",\n            fontSize: \"50px\",\n            textTransform: \"uppercase\",\n            fill: \"#FFF\",\n            stroke: \"#000\",\n            userSelect: \"none\"\n        };\n\n        return (\n            <div>\n                <div className=\"h1\" onClick={() => this.props.toggleSelected()}>\n                    MEME GENERATOR\n                </div>\n                <div className=\"main-content\">\n                    <div className=\"meme-gen-modal\">\n                        <svg\n                            id=\"svg_ref\"\n                            ref={(el) => { this.svgRef = el; }}\n                            height={newHeight}\n                            width={newWidth}\n                        >\n                            <image\n                                ref={(el) => {\n                                    this.imageRef = el;\n                                }}\n                                xlinkHref={this.props.meme.url}\n                                height={newHeight}\n                                width={newWidth}\n                            />\n\n                            <text\n                                id=\"tiptoptext\"\n                                style={{ ...textStyle, zIndex: this.state.isTopDragging ? 4 : 1 }}\n                                x={this.state.topX}\n                                y={this.state.topY}\n                                dominantBaseline=\"middle\"\n                                textAnchor=\"middle\"\n                                onMouseDown={(event) => this.handleMouseDown(event, \"top\")}\n                                onMouseUp={(event) => this.handleMouseUp(event, \"top\")}\n                            >\n                                {this.state.toptext}\n                            </text>\n\n                            <text\n                                id=\"bittybottomtext\"\n                                style={textStyle}\n                                dominantBaseline=\"middle\"\n                                textAnchor=\"middle\"\n                                x={this.state.bottomX}\n                                y={this.state.bottomY}\n                                onMouseDown={(event) => this.handleMouseDown(event, \"bottom\")}\n                                onMouseUp={(event) => this.handleMouseUp(event, \"bottom\")}\n                            >\n                                {this.state.bottomtext}\n                            </text>\n                        </svg>\n                        <div className=\"meme-form\">\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                name=\"tiptoptext\"\n                                id=\"toptext\"\n                                placeholder=\"Add text to the top\"\n                                onChange={this.changeText}\n                            />\n\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                name=\"bittybottomtext\"\n                                id=\"bottomtext\"\n                                placeholder=\"Add text to the bottom\"\n                                onChange={this.changeText}\n                            />\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                id=\"memename\"\n                                placeholder=\"Save meme as...\"\n                            />\n                        </div>\n                        <div className=\"buttons\">\n                            <button onClick={this.saveMeme} className=\"btn btn-primary\">Download Meme :D</button>\n                            <button onClick={this.resetBoxes} className=\"btn btn-primary\">Reset</button>\n                            <button onClick={() => this.props.toggleSelected()} className=\"btn btn-primary\">Back to Gallery</button>\n                        </div>\n\n                    </div>\n                </div>\n                <div className=\"image-list\">\n                  {this.state.saved_images.map((image) => {\n                    return (\n                      <Image\n                        key={image.uuid}\n                        image={image}\n                      />\n                    );\n                  })}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TempGen;\n","import React, { Component } from \"react\";\nimport Gallery from \"./Gallery\";\nimport TempGen from \"./TempGen\";\nimport utils from './utils/utils';\nimport {getMemes} from './utils/api';\n\nexport default class App extends Component {\n  state = {\n    images: [],\n    memes: [],\n    selected: null,\n    selectedImg: [],\n  };\n\n  handleImgClick = (e) => {\n    this.setState({\n      selectedImg: this.state.images.find(i => i.id === e.target.id),\n    });\n    this.toggleSelected()\n  };\n\n  chooseRandom = () => {\n    this.setState({ selected: true, selectedImg: this.state.images[Math.floor(Math.random() * this.state.images.length)] })\n  }\n\n  toggleComponent = () => {\n    if (this.state.selected) {\n      return <TempGen meme={this.state.selectedImg} toggleSelected={this.toggleSelected} />;\n    } else {\n      return (\n        <Gallery\n          handleRandom={this.chooseRandom}\n          images={this.state.images}\n          handleclick={this.handleImgClick}\n        />\n      );\n    }\n  };\n\n  getSessionId() {\n    // Check if a session id query parameter exists\n    const params = new URLSearchParams(window.location.search);\n    if (params.get('session-id')) {\n      return params.get('session-id');\n    }\n\n    // Check if a session id is stored to local storage\n    if (utils.store('session-id')) {\n      return utils.store('session-id');\n    }\n\n    // Otherwise, generate a new session id\n    const sid = utils.uuid();\n    utils.store('session-id', sid);\n    return sid;\n  }\n\n  render() {\n    \n    return <div>\n      {this.toggleComponent()}\n    </div>;\n  }\n\n  toggleSelected = () => {\n    this.setState({ selected: !this.state.selected })\n  }\n\n  componentDidMount() {\n    const sessionId = this.getSessionId();\n    getMemes(sessionId)\n      .then(data => {\n            this.setState({ images: data.rows.filter((i) => i.box_count === 2) });\n        });\n    //fetch(\"https://api.imgflip.com/get_memes\")\n    //  .then((r) => r.json())\n    //  .then((images) => {\n    //    console.log(images);\n    //    this.setState({ images2: images.data.memes.filter((i) => i.box_count === 2) });\n    //  });\n  }\n  \n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}