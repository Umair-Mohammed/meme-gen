(this["webpackJsonpmeme-generator"]=this["webpackJsonpmeme-generator"]||[]).push([[0],{108:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB3UlEQVRoge2YPUjDQBiG37RJaE0aK0UHN0fFwVFBwV0oiIM4uYngIoKCglB0EQXRQRRdHF2UqhQXB6WRUgdRrF11VgpWW/9aE4dSIUO05C4W9Xumy/2933tfLtwFIAiCIIhfjFAumF0wKxmQ2cu6Fw2AULi2on5CvBS7x9VofgAyUG3IQLVx1YCcjEGO77gpAdGtiYWHDJSVUQjGO+5bO2HUNbiiwz0DWqQPUkqHujYGz/1tycjGOKSUDi3Sx1uOfwa8N1fQpnosdbIehaxHYYQaecvxz4CpBu3bFPs2p3A3YKh19m0B+zancDOgTYchnx58nQE1CDGdQGC2n5csvz0gXeqQLo4BUbLvc3YIORkDPF5esmwGAvODkPWotbJYsO0vFF5LBeP989T51tmLx4lNxzEwvUK54UUYQeffd1MLIT+0wBICmwFTCyE/suR4fGkB6llCYDMgphPwxdYdj/fvr0I6P2IJ4fcf5pg2cbGlAw8zuxDTCdRszVW8msXmdjwNTKLQ1s0iD4DznbjS+yyPOcp3Yr5nIUmG6VNgKLUw/SrE6xQAoNjUCuE5B08+C+Elz1WSq4HM9p3lubya2eUTnjIW/vcm/g63/yEBfyADZKDakAGCIAiCIBj4APxje+OTYC0+AAAAAElFTkSuQmCC"},110:function(e,t,n){e.exports=n(218)},115:function(e,t,n){},116:function(e,t,n){},121:function(e,t){},123:function(e,t){},133:function(e,t){},135:function(e,t){},162:function(e,t){},164:function(e,t){},165:function(e,t){},171:function(e,t){},173:function(e,t){},191:function(e,t){},194:function(e,t){},210:function(e,t){},213:function(e,t){},218:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),s=n(107),r=n.n(s),c=(n(115),n(13)),i=n(14),u=n(16),m=n(15),l=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).setSpans=function(){var e=a.imageRef.current.clientHeight,t=Math.ceil(e/10+2);a.setState({spans:t})},a.state={spans:0},a.imageRef=o.a.createRef(),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{gridRowEnd:"span ".concat(this.state.spans)}},o.a.createElement("img",{ref:this.imageRef,src:this.props.image.url,alt:this.props.image.name,id:this.props.image.id,onClick:function(t){return e.props.handleclick(t)}}))}}]),n}(o.a.Component),d=(n(58),n(108)),g=n.n(d),p=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"h1"},"MEME GENERATOR"),o.a.createElement("img",{className:"icon",src:g.a,alt:"Logo",style:{position:"absolute",top:10,right:15,width:"7%",height:100}}),o.a.createElement("div",null,o.a.createElement("button",{className:"btn-gallery",onClick:function(){return e.props.handleRandom()}},"Gimme a Random Meme")),o.a.createElement("div",{className:"image-list"},this.props.images.map((function(t){return o.a.createElement(l,{key:t.id,image:t,handleclick:e.props.handleclick})}))))}}]),n}(a.Component),f=n(23),h=n(38),v=(n(116),n(39)),b=n(109),x=n.n(b),y=function(){return x.a.v1()},E=function(e,t){if("undefined"!==typeof window){if(t)return localStorage.setItem(e,JSON.stringify(t));var n=localStorage.getItem(e);return n&&JSON.parse(n)||null}return null},w=n(7),S=n.n(w),A=n(18),O=function(){var e=Object(A.a)(S.a.mark((function e(t){var a,o,s,r,c,i,u,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(37),o=n(56),s="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1"),r="memegen",c="memegen",e.next=7,o();case 7:return i=e.sent,u=i.authToken,e.prev=9,e.next=12,a("".concat(s,"/keyspaces/").concat(r,"/tables/").concat(c,"/rows"),{headers:{"x-cassandra-token":u}});case 12:return m=e.sent,e.abrupt("return",m.json());case 16:return e.prev=16,e.t0=e.catch(9),e.abrupt("return",JSON.stringify(e.t0));case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(A.a)(S.a.mark((function e(t){var a,o,s,r,c,i,u,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("test getMemesBlob"),a=n(37),o=n(56),s="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1"),r="memegen",c="memes_blob",e.next=8,o();case 8:return i=e.sent,u=i.authToken,e.prev=10,e.next=13,a("".concat(s,"/keyspaces/").concat(r,"/tables/").concat(c,"/rows/query"),{headers:{"x-cassandra-token":u},body:t});case 13:return m=e.sent,console.log("test"),console.log(m),e.abrupt("return",m.json());case 19:return e.prev=19,e.t0=e.catch(10),e.abrupt("return",JSON.stringify(e.t0));case 22:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(A.a)(S.a.mark((function e(t,a){var o,s,r,c,i,u,m,l,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={columns:Object.keys(t).map((function(e){return{name:e,value:t[e]}}))},console.log(o),s=n(37),r=n(56),c="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1"),i="memegen",u="memes_blob",e.next=9,r();case 9:return m=e.sent,l=m.authToken,e.prev=11,e.next=14,s("".concat(c,"/keyspaces/").concat(i,"/tables/").concat(u,"/rows"),{method:"POST",headers:{"Content-Type":"application/json","x-cassandra-token":l},body:JSON.stringify(o)});case 14:return d=e.sent,e.t0=JSON,e.next=18,d.json();case 18:return e.t1=e.sent,e.abrupt("return",e.t0.stringify.call(e.t0,e.t1));case 22:return e.prev=22,e.t2=e.catch(11),e.abrupt("return",JSON.stringify(e.t2));case 25:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(t,n){return e.apply(this,arguments)}}(),B={toptext:"",bottomtext:"",isTopDragging:!1,isBottomDragging:!1,topX:"50%",topY:"10%",bottomX:"50%",bottomY:"90%",saved_images:[]},I=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).getStateObj=function(t,n){var a=e.imageRef.getBoundingClientRect(),o=t.clientX-a.left,s=t.clientY-a.top,r={};return"bottom"===n?r={isBottomDragging:!0,isTopDragging:!1,bottomX:"".concat(o,"px"),bottomY:"".concat(s,"px")}:"top"===n&&(r={isTopDragging:!0,isBottomDragging:!1,topX:"".concat(o,"px"),topY:"".concat(s,"px")}),r},e.changeText=function(t){e.setState(Object(h.a)({},t.currentTarget.id,t.currentTarget.value));var n=t.currentTarget.name;e.resizeText(n)},e.handleMouseDown=function(t,n){var a=e.getStateObj(t,n);document.addEventListener("mousemove",(function(t){return e.handleMouseMove(t,n)})),e.setState(Object(f.a)({},a))},e.handleMouseMove=function(t,n){if(e.state.isTopDragging||e.state.isBottomDragging){var a={};("bottom"===n&&e.state.isBottomDragging||"top"===n&&e.state.isTopDragging)&&(a=e.getStateObj(t,n)),e.setState(Object(f.a)({},a))}},e.handleMouseUp=function(t){document.removeEventListener("mousemove",e.handleMouseMove),e.setState({isTopDragging:!1,isBottomDragging:!1})},e.saveMeme=function(){var t=document.getElementById("memename").value;t.length>0?v.saveSvgAsPng(document.getElementById("svg_ref"),"".concat(t,".png")):v.saveSvgAsPng(document.getElementById("svg_ref"),"meme.png"),v.svgAsPngUri(document.getElementById("svg_ref")).then((function(t){console.log(t);var n=e.getSessionId(),a=e.props.meme;a.sessionid=n,a.memename=document.getElementById("memename").value,a.toptext=document.getElementById("toptext").value,a.bottomtext=document.getElementById("bottomtext").value,a.image_source=t,j(a,n).then((function(e){console.log(e)}))}))},e.resetBoxes=function(){e.setState({toptext:"",bottomtext:"",topX:"50%",topY:"10%",bottomX:"50%",bottomY:"90%"}),document.getElementById("toptext").value="",document.getElementById("bottomtext").value="",document.getElementById("memename").value="",document.getElementById("tiptoptext").style.fontSize="50px",document.getElementById("bittybottomtext").style.fontSize="50px"},e.resizeText=function(t){var n=document.getElementById(t).textLength.baseVal.value,a=e.props.meme.width;n>a&&(document.getElementById(t).style.fontSize="".concat(a/n*40,"px"))},e.state=Object(f.a)({},B),e}return Object(i.a)(n,[{key:"getSessionId",value:function(){var e=new URLSearchParams(window.location.search);if(e.get("session-id"))return e.get("session-id");if(E("session-id"))return E("session-id");var t=y();return E("session-id",t),t}},{key:"componentDidMount",value:function(){var e=this.props.meme.id;console.log(e);k('{ "columnNames": ["image_source"], "filters": [{"value": ["161865971"],"columnName": "id","operator": "eq"}]}').then((function(e){console.log("tempgen test"),console.log(e)})),this.setState({saved_images:[]})}},{key:"render",value:function(){var e=this,t=this.props.meme,n=500/(t.width/t.height),a={fontFamily:"Impact",fontSize:"50px",textTransform:"uppercase",fill:"#FFF",stroke:"#000",userSelect:"none"};return o.a.createElement("div",null,o.a.createElement("div",{className:"h1",onClick:function(){return e.props.toggleSelected()}},"MEME GENERATOR"),o.a.createElement("div",{className:"main-content"},o.a.createElement("div",{className:"meme-gen-modal"},o.a.createElement("svg",{id:"svg_ref",ref:function(t){e.svgRef=t},height:n,width:500},o.a.createElement("image",{ref:function(t){e.imageRef=t},xlinkHref:this.props.meme.url,height:n,width:500}),o.a.createElement("text",{id:"tiptoptext",style:Object(f.a)(Object(f.a)({},a),{},{zIndex:this.state.isTopDragging?4:1}),x:this.state.topX,y:this.state.topY,dominantBaseline:"middle",textAnchor:"middle",onMouseDown:function(t){return e.handleMouseDown(t,"top")},onMouseUp:function(t){return e.handleMouseUp(t,"top")}},this.state.toptext),o.a.createElement("text",{id:"bittybottomtext",style:a,dominantBaseline:"middle",textAnchor:"middle",x:this.state.bottomX,y:this.state.bottomY,onMouseDown:function(t){return e.handleMouseDown(t,"bottom")},onMouseUp:function(t){return e.handleMouseUp(t,"bottom")}},this.state.bottomtext)),o.a.createElement("div",{className:"meme-form"},o.a.createElement("input",{className:"form-control",type:"text",name:"tiptoptext",id:"toptext",placeholder:"Add text to the top",onChange:this.changeText}),o.a.createElement("input",{className:"form-control",type:"text",name:"bittybottomtext",id:"bottomtext",placeholder:"Add text to the bottom",onChange:this.changeText}),o.a.createElement("input",{className:"form-control",type:"text",id:"memename",placeholder:"Save meme as..."})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:this.saveMeme,className:"btn btn-primary"},"Download Meme :D"),o.a.createElement("button",{onClick:this.resetBoxes,className:"btn btn-primary"},"Reset"),o.a.createElement("button",{onClick:function(){return e.props.toggleSelected()},className:"btn btn-primary"},"Back to Gallery")))),o.a.createElement("div",{className:"image-list"},this.state.saved_images.map((function(e){return o.a.createElement(l,{key:e.id,image:e,handleclick:""})}))))}}]),n}(a.Component),C=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={images:[],memes:[],selected:null,selectedImg:[]},e.handleImgClick=function(t){e.setState({selectedImg:e.state.images.find((function(e){return e.id===t.target.id}))}),e.toggleSelected()},e.chooseRandom=function(){e.setState({selected:!0,selectedImg:e.state.images[Math.floor(Math.random()*e.state.images.length)]})},e.toggleComponent=function(){return e.state.selected?o.a.createElement(I,{meme:e.state.selectedImg,toggleSelected:e.toggleSelected}):o.a.createElement(p,{handleRandom:e.chooseRandom,images:e.state.images,handleclick:e.handleImgClick})},e.toggleSelected=function(){e.setState({selected:!e.state.selected})},e}return Object(i.a)(n,[{key:"getSessionId",value:function(){var e=new URLSearchParams(window.location.search);if(e.get("session-id"))return e.get("session-id");if(E("session-id"))return E("session-id");var t=y();return E("session-id",t),t}},{key:"render",value:function(){return o.a.createElement("div",null,this.toggleComponent())}},{key:"componentDidMount",value:function(){var e=this,t=this.getSessionId();O(t).then((function(t){e.setState({images:t.rows.filter((function(e){return 2===e.box_count}))})}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,n){"use strict";n.r(t),function(e){var t,a=n(7),o=n.n(a),s=n(18),r=n(37),c="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1");e.exports=function(){var e=Object(s.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t);case 2:return e.prev=2,e.next=5,r("".concat(c,"/auth"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:"memegen",password:"memegen2021"})});case 5:return n=e.sent,e.next=8,n.json();case 8:return t=e.sent,e.abrupt("return",t);case 12:throw e.prev=12,e.t0=e.catch(2),new Error("Could not authenticate with the Astra API");case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}()}.call(this,n(217)(e))},58:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.0dccf2d1.chunk.js.map