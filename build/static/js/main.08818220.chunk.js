(this["webpackJsonpmeme-generator"]=this["webpackJsonpmeme-generator"]||[]).push([[0],{108:function(e,t,n){e.exports=n(215)},113:function(e,t,n){},114:function(e,t,n){},119:function(e,t){},121:function(e,t){},131:function(e,t){},133:function(e,t){},160:function(e,t){},162:function(e,t){},163:function(e,t){},169:function(e,t){},171:function(e,t){},189:function(e,t){},192:function(e,t){},208:function(e,t){},211:function(e,t){},215:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),s=n(106),i=n.n(s),c=(n(113),n(10)),u=n(11),m=n(13),l=n(12),d=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).setSpans=function(){var e=a.imageRef.current.clientHeight,t=Math.ceil(e/10+2);a.setState({spans:t})},a.state={spans:0},a.imageRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{gridRowEnd:"span ".concat(this.state.spans)}},r.a.createElement("img",{ref:this.imageRef,src:this.props.image.url,alt:this.props.image.name,id:this.props.image.id,onClick:function(t){return e.props.handleclick(t)}}))}}]),n}(r.a.Component);n(57);n.e(3).then(n.t.bind(null,216,7)).then((function(e){a=e.default}));var p,g=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"h1"},"MEME GENERATOR"),r.a.createElement("img",{className:"icon",src:a,alt:"Logo",style:{position:"absolute",top:10,right:15,width:"7%",height:100}}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn-gallery",onClick:function(){return e.props.handleRandom()}},"Gimme a Random Meme")),r.a.createElement("div",{className:"image-list"},this.props.images.map((function(t){return r.a.createElement(d,{key:t.id,image:t,handleclick:e.props.handleclick})}))))}}]),n}(o.Component),f=n(23),h=n(38),v=(n(114),function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).setSpans=function(){var e=a.imageRef.current.clientHeight,t=Math.ceil(e/10+2);a.setState({spans:t})},a.state={spans:0},a.imageRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"render",value:function(){return r.a.createElement("div",{style:{gridRowEnd:"span ".concat(this.state.spans)}},r.a.createElement("img",{ref:this.imageRef,src:this.props.image.image_source,alt:this.props.image.name,id:this.props.image.id}))}}]),n}(r.a.Component)),b=n(39),y=n(107),x=n.n(y),E=function(){return x.a.v1()},S=function(e,t){if("undefined"!==typeof window){if(t)return localStorage.setItem(e,JSON.stringify(t));var n=localStorage.getItem(e);return n&&JSON.parse(n)||null}return null},k=n(7),w=n.n(k),O=n(18),j=n(37),M="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1");function I(){return B.apply(this,arguments)}function B(){return(B=Object(O.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return",p);case 2:return e.prev=2,e.next=5,j("".concat(M,"/auth"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:"memegen",password:"memegen2021"})});case 5:return t=e.sent,e.next=8,t.json();case 8:return p=e.sent,e.abrupt("return",p);case 12:throw e.prev=12,e.t0=e.catch(2),new Error("Could not authenticate with the Astra API");case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}var N=function(){var e=Object(O.a)(w.a.mark((function e(t){var a,o,r,s,i,c,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(37),o="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1"),r="memegen",s="memegen",e.next=6,I();case 6:return i=e.sent,c=i.authToken,e.prev=8,e.next=11,a("".concat(o,"/keyspaces/").concat(r,"/tables/").concat(s,"/rows"),{headers:{"x-cassandra-token":c}});case 11:return u=e.sent,e.abrupt("return",u.json());case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",JSON.stringify(e.t0));case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(O.a)(w.a.mark((function e(t){var a,o,r,s,i,c,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(37),o="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1"),r="memegen",s="memes_saved",e.next=6,I();case 6:return i=e.sent,c=i.authToken,e.prev=8,e.next=11,a("".concat(o,"/keyspaces/").concat(r,"/tables/").concat(s,"/rows/query"),{method:"POST",headers:{"Content-Type":"application/json","x-cassandra-token":c},body:t});case 11:return u=e.sent,e.abrupt("return",u.json());case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return",JSON.stringify(e.t0));case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(O.a)(w.a.mark((function e(t,a){var o,r,s,i,c,u,m,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uuid=E(),t.sessionid=a,o={columns:Object.keys(t).map((function(e){return{name:e,value:t[e]}}))},r=n(37),s="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1"),i="memegen",c="memes_saved",e.next=9,I();case 9:return u=e.sent,m=u.authToken,e.prev=11,e.next=14,r("".concat(s,"/keyspaces/").concat(i,"/tables/").concat(c,"/rows"),{method:"POST",headers:{"Content-Type":"application/json","x-cassandra-token":m},body:JSON.stringify(o)});case 14:return l=e.sent,e.t0=JSON,e.next=18,l.json();case 18:return e.t1=e.sent,e.abrupt("return",e.t0.stringify.call(e.t0,e.t1));case 22:return e.prev=22,e.t2=e.catch(11),e.abrupt("return",JSON.stringify(e.t2));case 25:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(t,n){return e.apply(this,arguments)}}(),D={toptext:"",bottomtext:"",isTopDragging:!1,isBottomDragging:!1,topX:"50%",topY:"10%",bottomX:"50%",bottomY:"90%",saved_images:[]},C=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).getStateObj=function(t,n){var a=e.imageRef.getBoundingClientRect(),o=t.clientX-a.left,r=t.clientY-a.top,s={};return"bottom"===n?s={isBottomDragging:!0,isTopDragging:!1,bottomX:"".concat(o,"px"),bottomY:"".concat(r,"px")}:"top"===n&&(s={isTopDragging:!0,isBottomDragging:!1,topX:"".concat(o,"px"),topY:"".concat(r,"px")}),s},e.changeText=function(t){e.setState(Object(h.a)({},t.currentTarget.id,t.currentTarget.value));var n=t.currentTarget.name;e.resizeText(n)},e.handleMouseDown=function(t,n){var a=e.getStateObj(t,n);document.addEventListener("mousemove",(function(t){return e.handleMouseMove(t,n)})),e.setState(Object(f.a)({},a))},e.handleMouseMove=function(t,n){if(e.state.isTopDragging||e.state.isBottomDragging){var a={};("bottom"===n&&e.state.isBottomDragging||"top"===n&&e.state.isTopDragging)&&(a=e.getStateObj(t,n)),e.setState(Object(f.a)({},a))}},e.handleMouseUp=function(t){document.removeEventListener("mousemove",e.handleMouseMove),e.setState({isTopDragging:!1,isBottomDragging:!1})},e.saveMeme=function(){var t=document.getElementById("memename").value;t.length>0?b.saveSvgAsPng(document.getElementById("svg_ref"),"".concat(t,".png")):b.saveSvgAsPng(document.getElementById("svg_ref"),"meme.png"),b.svgAsPngUri(document.getElementById("svg_ref")).then((function(t){var n=e.getSessionId(),a=e.props.meme;a.sessionid=n,a.memename=document.getElementById("memename").value,a.toptext=document.getElementById("toptext").value,a.bottomtext=document.getElementById("bottomtext").value,a.image_source=t,T(a,n).then((function(e){}))}))},e.resetBoxes=function(){e.setState({toptext:"",bottomtext:"",topX:"50%",topY:"10%",bottomX:"50%",bottomY:"90%"}),document.getElementById("toptext").value="",document.getElementById("bottomtext").value="",document.getElementById("memename").value="",document.getElementById("tiptoptext").style.fontSize="50px",document.getElementById("bittybottomtext").style.fontSize="50px"},e.resizeText=function(t){var n=document.getElementById(t).textLength.baseVal.value,a=e.props.meme.width;n>a&&(document.getElementById(t).style.fontSize="".concat(a/n*40,"px"))},e.state=Object(f.a)({},D),e}return Object(u.a)(n,[{key:"getSessionId",value:function(){var e=new URLSearchParams(window.location.search);if(e.get("session-id"))return e.get("session-id");if(S("session-id"))return S("session-id");var t=E();return S("session-id",t),t}},{key:"componentDidMount",value:function(){var e=this,t=this.props.meme.id;R('{ "columnNames": ["uuid","id","name","image_source"], "filters": [{"value": ["'+t+'"],"columnName": "id","operator": "eq"}]}').then((function(t){e.setState({saved_images:t.rows})}))}},{key:"render",value:function(){var e=this,t=this.props.meme,n=500/(t.width/t.height),a={fontFamily:"Impact",fontSize:"50px",textTransform:"uppercase",fill:"#FFF",stroke:"#000",userSelect:"none"};return r.a.createElement("div",null,r.a.createElement("div",{className:"h1",onClick:function(){return e.props.toggleSelected()}},"MEME GENERATOR"),r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"meme-gen-modal"},r.a.createElement("svg",{id:"svg_ref",ref:function(t){e.svgRef=t},height:n,width:500},r.a.createElement("image",{ref:function(t){e.imageRef=t},xlinkHref:this.props.meme.url,height:n,width:500}),r.a.createElement("text",{id:"tiptoptext",style:Object(f.a)(Object(f.a)({},a),{},{zIndex:this.state.isTopDragging?4:1}),x:this.state.topX,y:this.state.topY,dominantBaseline:"middle",textAnchor:"middle",onMouseDown:function(t){return e.handleMouseDown(t,"top")},onMouseUp:function(t){return e.handleMouseUp(t,"top")}},this.state.toptext),r.a.createElement("text",{id:"bittybottomtext",style:a,dominantBaseline:"middle",textAnchor:"middle",x:this.state.bottomX,y:this.state.bottomY,onMouseDown:function(t){return e.handleMouseDown(t,"bottom")},onMouseUp:function(t){return e.handleMouseUp(t,"bottom")}},this.state.bottomtext)),r.a.createElement("div",{className:"meme-form"},r.a.createElement("input",{className:"form-control",type:"text",name:"tiptoptext",id:"toptext",placeholder:"Add text to the top",onChange:this.changeText}),r.a.createElement("input",{className:"form-control",type:"text",name:"bittybottomtext",id:"bottomtext",placeholder:"Add text to the bottom",onChange:this.changeText}),r.a.createElement("input",{className:"form-control",type:"text",id:"memename",placeholder:"Save meme as..."})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:this.saveMeme,className:"btn btn-primary"},"Download Meme :D"),r.a.createElement("button",{onClick:this.resetBoxes,className:"btn btn-primary"},"Reset"),r.a.createElement("button",{onClick:function(){return e.props.toggleSelected()},className:"btn btn-primary"},"Back to Gallery")))),r.a.createElement("div",{className:"image-list"},this.state.saved_images.map((function(e){return r.a.createElement(v,{key:e.uuid,image:e})}))))}}]),n}(o.Component),_=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={images:[],memes:[],selected:null,selectedImg:[]},e.handleImgClick=function(t){e.setState({selectedImg:e.state.images.find((function(e){return e.id===t.target.id}))}),e.toggleSelected()},e.chooseRandom=function(){e.setState({selected:!0,selectedImg:e.state.images[Math.floor(Math.random()*e.state.images.length)]})},e.toggleComponent=function(){return e.state.selected?r.a.createElement(C,{meme:e.state.selectedImg,toggleSelected:e.toggleSelected}):r.a.createElement(g,{handleRandom:e.chooseRandom,images:e.state.images,handleclick:e.handleImgClick})},e.toggleSelected=function(){e.setState({selected:!e.state.selected})},e}return Object(u.a)(n,[{key:"getSessionId",value:function(){var e=new URLSearchParams(window.location.search);if(e.get("session-id"))return e.get("session-id");if(S("session-id"))return S("session-id");var t=E();return S("session-id",t),t}},{key:"render",value:function(){return r.a.createElement("div",null,this.toggleComponent())}},{key:"componentDidMount",value:function(){var e=this,t=this.getSessionId();N(t).then((function(t){e.setState({images:t.rows.filter((function(e){return 2===e.box_count}))})}))}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.08818220.chunk.js.map